@{
    //This block of code is "global" which means it will always be loaded
    Layout = "~/_Layout.cshtml";
    Page.Title = "Multi Query";

    var db = Database.Open("NWDB");
    var querycomand = @"SELECT CategoryID, CategoryName
                FROM Categories
                ORDER BY CategoryName";
    var datainfo = db.Query(querycomand);
}

@section banner{
    <h1>Database: Multiple Record Query</h1>

    <blockquote>
        This is the frist page of a two page query. This first page will load a drop
        down list from data provided by the database. The page will pass the selected
        value from the dropdown list to the next page, which will be responsible for
        displaying multiple records for the selected value.
    </blockquote>
}

@if (IsPost)
{
    var choice = Request.Form["CategoryList"];
    if (choice.Equals("0"))
    {
        //validate
        <p><span style="color: firebrick;">Select a category for which to search products:</span></p>
    }
    else
    {
        //pass data to another page
        //Response.Redirect("relative page name"[?label=value[&label=value]]) [] not necessary
        Response.Redirect("MultiRecordWebGrid.cshtml?cid=" + choice);

    }
}

<form id="theform" method="post">
    <div class="col-md-offest-3">
        <label for="CategoryList" id="CategoryListLabel">
            Select the category products to view:
        </label>
        &nbsp;

        <select id="CategoryList" name="CategoryList">
            <option value="0">select ...</option>
            @foreach (var rowitem in datainfo)
            {
                <option value="@rowitem.CategoryID">@rowitem.CategoryName</option>
            }
        </select>

        <input type="submit" id="FormButton" name="FormButton"
               class="btn btn-primary" value="Submit" />
        &nbsp;&nbsp;
        <input type="submit" id="FormButton" name="FormButton"
               class="btn" value="Clear" />
    </div>
</form>
